/**
 * Copyright 2014  Evernote Corporation. All rights reserved.
 */
var EvernoteClipper=function(e){function i(e,i,t,l){var n=/\sstyle\s*=\s*("([^"]*)"|'([^']*)')/.exec(i),r="";return n&&(r=n[2],";"!==r[r.length-1]&&(r+=";")),r+=t+":"+l,n?"<"+e+i.slice(0,n.index)+' style="'+r+'"'+i.slice(n.index+n[0].length)+">":i?"<"+e+i+' style="'+r+'">':"<"+e+' style="'+r+'">'}return e.format=function(t){var l=t.title,n=t.date,r=t.authors,s=t.summary,a=t.body;a=a.replace(/<([a-zA-Z0-9]+)(\s[^>]*)?>/g,function(e,t,l){return i(t,l,"line-height","30px")}),a=a.replace(/<figure[^>]*><img [^>]*src="([\s\S]+?)"[^>]*\/?>[\s\S]*?<figcaption[^>]*>([\s\S]+?)<\/figcaption>[\s\S]*?<\/figure>/gi,function(e,i,t,l,n){var r='<div style="display:table;margin:0 auto">',s=n.slice(0,l).replace(/\s+$/,"");if(s){var a="60px";/<\/p>$/i.test(s)&&(a="30px"),r+='<div style="display:table-row;height:'+a+'"></div>'}return r+='<div style="display:table-row"><img src="'+i+'"/></div><div style="display:table-row;height:20px"></div><div style="display:table-cell;font:14px/30px Helvetica;width:1px">'+t+'</div><div style="display:table-row;height:60px"></div>',r+="</div>"}),a=a.replace(/<p(\s[^>]*)?>/gi,function(e,t){return i("p",t,"margin-bottom","30px")}),a=a.replace(/<h(\d)(\s[^>]*)?>/gi,function(e,t,l){return i("h"+t,l,"font","bold 18px Georgia")});var p='<img src="https://cdn1.evernote.com/clipncite/wsj-header.png"/><img src="https://cdn1.evernote.com/clipncite/wsj-thumbnail.png" style="display:none"/>';return l&&(p+='<div style="font:32px/40px Georgia">'+l+"</div>"),(n||r)&&(p+='<div style="height:27px"></div><div style="color:#6C6C6C;font:18px Helvetica;">',n&&(p+="<span>"+e.formatDate(new Date(n))+"</span>"),r&&(p+='<span style="margin-left:30px">By '+r+"</span>"),p+="</div>"),s&&(p+='<div style="height:80px"></div><div style="background:#E0E0E0;height:2px;margin:0 auto;width:70px"></div><div style="height:30px"></div><div style="color:#2DBE60;font:18px/30px Georgia;padding:0 30px;text-align:center">'+s+'</div><div style="height:30px"></div><div style="background:#E0E0E0;height:2px;margin:0 auto;width:70px"></div>'),p+='<div style="height:80px"></div><div style="font:16px Helvetica">'+a+"</div>"},e.referralCode="wsj",e}(EvernoteClipper||{});